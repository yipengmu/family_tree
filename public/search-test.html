<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœç´¢åŠŸèƒ½æµ‹è¯•</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f8fafc;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 32px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
        .test-title {
            font-size: 28px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 24px;
            text-align: center;
        }
        .test-section {
            margin: 24px 0;
            padding: 20px;
            background: #f8fafc;
            border-radius: 12px;
            border: 1px solid #e2e8f0;
        }
        .test-section h3 {
            margin: 0 0 16px 0;
            color: #475569;
        }
        .test-item {
            margin: 12px 0;
            padding: 12px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e2e8f0;
        }
        .test-item strong {
            color: #8b5cf6;
        }
        .status-good {
            color: #10b981;
            font-weight: 600;
        }
        .status-bad {
            color: #ef4444;
            font-weight: 600;
        }
        .test-link {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 8px 8px 8px 0;
        }
        .test-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(139, 92, 246, 0.3);
            color: white;
            text-decoration: none;
        }
        .code-block {
            background: #1e293b;
            color: #e2e8f0;
            padding: 16px;
            border-radius: 8px;
            font-family: monospace;
            font-size: 13px;
            overflow-x: auto;
            margin: 12px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 class="test-title">ğŸ” æœç´¢åŠŸèƒ½æµ‹è¯•</h1>
        
        <div class="test-section">
            <h3>ä¿®å¤å†…å®¹</h3>
            <div class="test-item">
                <strong>1. æ•°æ®ä¼ é€’é—®é¢˜</strong><br>
                ä¿®å¤äº†nodesæ•°æ®ä»FamilyTreeFlowä¼ é€’åˆ°FamilySearchBarçš„é—®é¢˜
            </div>
            <div class="test-item">
                <strong>2. æœç´¢é€»è¾‘å®ç°</strong><br>
                å®ç°äº†çœŸæ­£çš„æœç´¢åŠŸèƒ½ï¼Œè¿æ¥FamilySearchBarå’ŒFamilyTreeFlow
            </div>
            <div class="test-item">
                <strong>3. ç»„ä»¶é€šä¿¡</strong><br>
                ä½¿ç”¨forwardRefå’ŒuseImperativeHandleå®ç°ç»„ä»¶é—´é€šä¿¡
            </div>
            <div class="test-item">
                <strong>4. èŠ‚ç‚¹æ•°é‡æ˜¾ç¤º</strong><br>
                ä¿®å¤äº†èŠ‚ç‚¹æ•°é‡æ˜¾ç¤ºä¸æ­£ç¡®çš„é—®é¢˜ï¼Œåº”è¯¥æ˜¾ç¤º62äºº
            </div>
        </div>

        <div class="test-section">
            <h3>æµ‹è¯•æ­¥éª¤</h3>
            <div class="test-item">
                <strong>æ­¥éª¤1:</strong> æ‰“å¼€ä¸»é¡µé¢ï¼Œæ£€æŸ¥æœç´¢æ æ˜¯å¦æ˜¾ç¤ºæ­£ç¡®çš„äººæ•°ï¼ˆ62/689äººï¼‰
            </div>
            <div class="test-item">
                <strong>æ­¥éª¤2:</strong> åœ¨æœç´¢æ¡†ä¸­è¾“å…¥"ç©†"ï¼Œæ£€æŸ¥æ˜¯å¦å‡ºç°æœç´¢å»ºè®®
            </div>
            <div class="test-item">
                <strong>æ­¥éª¤3:</strong> é€‰æ‹©ä¸€ä¸ªæœç´¢å»ºè®®ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®è·³è½¬åˆ°å¯¹åº”èŠ‚ç‚¹
            </div>
            <div class="test-item">
                <strong>æ­¥éª¤4:</strong> æŒ‰å›è½¦é”®æœç´¢ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®æ‰§è¡Œæœç´¢
            </div>
            <div class="test-item">
                <strong>æ­¥éª¤5:</strong> æ£€æŸ¥æœç´¢å†å²æ˜¯å¦æ­£ç¡®ä¿å­˜å’Œæ˜¾ç¤º
            </div>
        </div>

        <div class="test-section">
            <h3>æŠ€æœ¯å®ç°</h3>
            <div class="code-block">
// FamilyTreePage.js - ç®¡ç†æœç´¢çŠ¶æ€
const [nodes, setNodes] = useState([]);
const [statistics, setStatistics] = useState(null);

// FamilyTreeFlow.js - æš´éœ²æœç´¢æ–¹æ³•
useImperativeHandle(ref, () => ({
  handleSearch: (query) => { /* æœç´¢é€»è¾‘ */ },
  handleSearchSelect: (value, option) => { /* é€‰æ‹©é€»è¾‘ */ }
}));

// FamilySearchBar.js - è°ƒç”¨æœç´¢æ–¹æ³•
const handleSearch = useCallback((query) => {
  if (onSearch) {
    onSearch(query);
  }
}, [onSearch]);
            </div>
        </div>

        <div class="test-section">
            <h3>é¢„æœŸç»“æœ</h3>
            <div class="test-item">
                <span class="status-good">âœ“</span> æœç´¢æ æ˜¾ç¤ºæ­£ç¡®çš„èŠ‚ç‚¹æ•°é‡
            </div>
            <div class="test-item">
                <span class="status-good">âœ“</span> æœç´¢å»ºè®®æ­£å¸¸æ˜¾ç¤º
            </div>
            <div class="test-item">
                <span class="status-good">âœ“</span> æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
            </div>
            <div class="test-item">
                <span class="status-good">âœ“</span> æœç´¢å†å²æ­£å¸¸ä¿å­˜
            </div>
            <div class="test-item">
                <span class="status-good">âœ“</span> èŠ‚ç‚¹è·³è½¬æ­£å¸¸å·¥ä½œ
            </div>
        </div>

        <div style="text-align: center; margin-top: 32px;">
            <a href="/" class="test-link">ğŸŒ³ æµ‹è¯•ä¸»é¡µé¢</a>
            <a href="/debug.html" class="test-link">ğŸ”§ è°ƒè¯•å·¥å…·</a>
        </div>

        <div class="test-section">
            <h3>å¸¸è§é—®é¢˜æ’æŸ¥</h3>
            <div class="test-item">
                <strong>é—®é¢˜1:</strong> èŠ‚ç‚¹æ•°é‡æ˜¾ç¤ºä¸º0<br>
                <strong>è§£å†³:</strong> æ£€æŸ¥onDataUpdateå›è°ƒæ˜¯å¦æ­£ç¡®è§¦å‘
            </div>
            <div class="test-item">
                <strong>é—®é¢˜2:</strong> æœç´¢æ— ååº”<br>
                <strong>è§£å†³:</strong> æ£€æŸ¥useImperativeHandleæ˜¯å¦æ­£ç¡®æš´éœ²æ–¹æ³•
            </div>
            <div class="test-item">
                <strong>é—®é¢˜3:</strong> æœç´¢å»ºè®®ä¸æ˜¾ç¤º<br>
                <strong>è§£å†³:</strong> æ£€æŸ¥familyDataæ˜¯å¦æ­£ç¡®ä¼ é€’
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½å®Œæˆåçš„æ£€æŸ¥
        window.addEventListener('load', function() {
            console.log('æœç´¢åŠŸèƒ½æµ‹è¯•é¡µé¢å·²åŠ è½½');
            console.log('è¯·æŒ‰ç…§æµ‹è¯•æ­¥éª¤è¿›è¡ŒåŠŸèƒ½éªŒè¯');
        });
    </script>
</body>
</html>
